/* ==========================================================================
   1. CONFIGURACIÓN GLOBAL Y VARIABLES
   ========================================================================== */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
:root {
    --nidec-green: #24b817; --nidec-green-dark: #1c8c11; --nidec-green-light: #e9f8e8;
    --color-background: #f4f7f6; --color-surface: #ffffff; --color-text-dark: #212529;
    --color-text-light: #ffffff; --color-border: #dee2e6; --color-kpi-red: #ff0019;
    --color-kpi-yellow: #f59e0b; --color-kpi-green: #22c55e; --color-kpi-grey: #e5e7eb;
    --color-danger: #ff0019; --sidebar-width: 280px; --header-height: 70px;
    --sidebar-bg: var(--nidec-green); --sidebar-text: #ffffff;
    --sidebar-hover: var(--nidec-green-dark); --sidebar-active: #1a5f1a;
}
body { background-color: var(--color-background); font-family: 'Poppins', sans-serif; color: var(--color-text-dark); margin: 0; padding: 0; overflow-x: hidden; }

/* ==========================================================================
   NUEVO DISEÑO DE LOGIN (SPLIT-SCREEN)
   ========================================================================== */
.login-page-wrapper {
    min-height: 100vh;
    width: 100%;
}

/* Regla clave para el centrado vertical en escritorio */
.full-height-row {
    min-height: 100vh;
}

.login-branding-side {
    background-color: var(--nidec-green);
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 2rem;
}
.branding-logo {
    max-width: 250px;
    margin-bottom: 1.5rem;
    filter: brightness(0) invert(1);
}
.branding-slogan {
    font-weight: 300;
    font-size: 1.75rem;
    letter-spacing: 1px;
    opacity: 0.9;
}

.login-form-side {
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #f4f7f6;
    padding: 2rem;
}
.login-form-container {
    background-color: var(--color-surface);
    padding: 3rem;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 450px;
    text-align: center;
}
.form-title { font-weight: 600; margin-bottom: 0.5rem; }
.form-subtitle { color: #6c757d; margin-bottom: 2rem; }

.input-group-text { background-color: #e9ecef; border-right: none; }
.form-control:focus {
    border-color: var(--nidec-green);
    box-shadow: 0 0 0 0.2rem rgba(36, 184, 23, 0.25);
}

.btn-nidec-style {
    background-color: var(--nidec-green);
    border-color: var(--nidec-green);
    color: white;
    font-weight: 600;
    transition: background-color 0.2s ease-in-out;
}
.btn-nidec-style:hover {
    background-color: var(--nidec-green-dark);
    border-color: var(--nidec-green-dark);
    color: white;
}

/* Diseño responsivo para el login */
@media (max-width: 767.98px) {
    .full-height-row {
        min-height: initial; /* En móvil, la altura vuelve a ser automática */
    }
    .login-branding-side {
        min-height: 30vh;
        order: 1;
    }
    .login-form-side {
        min-height: 70vh;
        order: 2;
        align-items: flex-start;
        padding-top: 3rem;
    }
    .login-form-container {
        box-shadow: none;
        padding: 1.5rem;
    }
}

/* ==========================================================================
   2. LAYOUT PRINCIPAL (SIDEBAR, ENCABEZADO Y CONTENIDO)
   ========================================================================== */

/* --- Top Header (Encabezado Verde) --- */
.top-header { 
    background-color: var(--nidec-green); 
    color: white; 
    height: var(--header-height); 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    padding: 0 1.5rem; 
    border-bottom: 1px solid var(--nidec-green-dark); 
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
    position: sticky; 
    top: 0; 
    z-index: 1030;
    transition: transform 0.3s ease-in-out;
}
.top-header.header-hidden {
    transform: translateY(-100%);
}
.header-left { display: flex; align-items: center; gap: 0.5rem; }
.sidebar-toggle { background: none; border: none; font-size: 1.25rem; color: white; padding: 0.5rem; border-radius: 4px; cursor: pointer; transition: background-color 0.2s ease; }
.sidebar-toggle:hover { background-color: rgba(255, 255, 255, 0.1); }
.page-title h4 { color: white; font-weight: 600; margin: 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); }
.header-right { display: flex; align-items: center; gap: 1rem; }
.user-menu .user-info strong, .user-menu .user-info i { color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); }

/* --- Sidebar (Menú Lateral) --- */
.sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1040; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
.sidebar-overlay.active { opacity: 1; visibility: visible; }
.sidebar { position: fixed; top: 0; left: -100%; width: var(--sidebar-width); height: 100vh; background-color: var(--sidebar-bg); color: var(--sidebar-text); z-index: 1050; transition: left 0.3s ease; display: flex; flex-direction: column; overflow-y: auto; }
.sidebar.active { left: 0; }
.sidebar-header { padding: 1.5rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; justify-content: space-between; align-items: center; }
.sidebar-logo { max-height: 40px; width: auto; filter: brightness(0) invert(1); }
.sidebar-close { background: none; border: none; color: var(--sidebar-text); font-size: 1.2rem; cursor: pointer; padding: 0.5rem; border-radius: 4px; }
.sidebar-user { padding: 1.5rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
.user-info { display: flex; align-items: center; }
.user-avatar { font-size: 1.5rem; margin-right: 1rem; color: var(--nidec-green); background-color: #ffffff; border-radius: 50%; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.user-details { display: flex; flex-direction: column; }
.user-details strong { font-size: 1rem; font-weight: 600; }
.user-details small { color: rgba(255, 255, 255, 0.9); }
.sidebar-menu { flex: 1; padding: 1rem 0; overflow-y: auto; }
.menu-section { margin-bottom: 1.5rem; }
.menu-section-title { color: rgba(255, 255, 255, 0.7); font-size: 0.75rem; font-weight: 600; text-transform: uppercase; padding: 0 1.5rem 0.5rem; }
.menu-item { display: flex; align-items: center; padding: 0.75rem 1.5rem; color: var(--sidebar-text); text-decoration: none; transition: background-color 0.2s ease; font-weight: 500; }
.menu-item:hover { background-color: var(--sidebar-hover); text-decoration: none; color: white; }
.menu-item.active { background-color: var(--sidebar-active); }
.menu-item i.fa-fw { width: 1.28571429em; text-align: center; margin-right: 0.75rem; }
.dropdown-icon { margin-left: auto; transition: transform 0.2s ease; }
.dropdown-icon.rotated { transform: rotate(180deg); }
.submenu { background-color: rgba(0, 0, 0, 0.2); overflow: hidden; max-height: 0; transition: max-height 0.3s ease; }
.submenu.show { max-height: 500px; }
.submenu-item { display: flex; align-items: center; padding: 0.7rem 1.5rem 0.7rem 3.5rem; font-size: 0.95rem; color: rgba(255, 255, 255, 0.9); text-decoration: none; }
.submenu-item:hover { color: white; background-color: var(--sidebar-hover); text-decoration: none; }
.sidebar-footer { padding: 1rem 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.1); }
.logout-item { color: #ff8a8a !important; }
.logout-item:hover { background-color: rgba(255, 107, 107, 0.2) !important; color: #f50e0e !important; }

/* Estilos para la barra de desplazamiento del Sidebar */
.sidebar { scrollbar-width: thin; scrollbar-color: rgba(255, 255, 255, 0.7) var(--sidebar-hover); }
.sidebar::-webkit-scrollbar { width: 8px; }
.sidebar::-webkit-scrollbar-track { background: var(--sidebar-hover); border-radius: 10px; }
.sidebar::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.7); border-radius: 10px; border: 2px solid var(--sidebar-hover); }
.sidebar::-webkit-scrollbar-thumb:hover { background-color: rgba(255, 255, 255, 0.9); }

/* --- Contenido Principal --- */
.main-content { margin-left: 0; transition: margin-left 0.3s ease; min-height: 100vh; display: flex; flex-direction: column; }
.content-area { flex: 1; padding: 2rem; background-color: var(--color-background); }
.content-section { background-color: var(--color-surface); padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.07); margin-bottom: 1.5rem; }

/* ==========================================================================
   3. COMPONENTES GENERALES
   ========================================================================== */
.notification-bell { position: relative; font-size: 1.4rem; color: white; text-decoration: none; transition: opacity 0.2s ease; }
.notification-bell:hover { opacity: 0.8; color: white; }
.notification-badge { position: absolute; top: -5px; right: -8px; font-size: 0.6em; padding: 0.2em 0.45em; border-radius: 50%; }
.kpi-card { background-color: var(--color-surface); padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 15px rgba(0,0,0,0.07); text-align: center; transition: transform 0.3s ease, box-shadow 0.3s ease; }
.kpi-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
.kpi-card__wheel { position: relative; width: 150px; height: 150px; border-radius: 50%; display: grid; place-items: center; margin: 0 auto 1rem; }
.kpi-card__wheel::before { content: ""; position: absolute; height: 84%; width: 84%; background-color: var(--color-surface); border-radius: 50%; }
.kpi-card__value { position: relative; font-size: 2.5rem; font-weight: 700; }
.kpi-card__wheel--red { background: conic-gradient(var(--color-kpi-red) calc(var(--value) * 1%), var(--color-kpi-grey) 0deg); }
.kpi-card__wheel--red .kpi-card__value { color: var(--color-kpi-red); }
.kpi-card__wheel--yellow { background: conic-gradient(var(--color-kpi-yellow) calc(var(--value) * 1%), var(--color-kpi-grey) 0deg); }
.kpi-card__wheel--yellow .kpi-card__value { color: var(--color-kpi-yellow); }
.kpi-card__wheel--green { background: conic-gradient(var(--color-kpi-green) calc(var(--value) * 1%), var(--color-kpi-grey) 0deg); }
.kpi-card__wheel--green .kpi-card__value { color: var(--color-kpi-green); }

/* ==========================================================================
   4. DISEÑO RESPONSIVO
   ========================================================================== */
.desktop-view { display: block; }
.mobile-view { display: none; }

@media (min-width: 992px) {
    .sidebar { left: 0; transform: translateX(0); transition: transform 0.3s ease; }
    .sidebar:not(.active) { transform: translateX(-100%); }
    .main-content { transition: margin-left 0.3s ease; }
    .main-content.sidebar-open { margin-left: var(--sidebar-width); }
    .sidebar-overlay { display: none; }
    .sidebar-close { display: none; }
}

@media (max-width: 991.98px) {
    .desktop-view { display: none; }
    .mobile-view { display: block; }
    .content-area { padding: 1rem; }
    body.sidebar-open { overflow: hidden; }
    .user-menu { display: none; }
}